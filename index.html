<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>SARA ROMA · Dossier (hotspots)</title>
  <style>
    html,body{height:100%;margin:0;background:#fff}
    .stage{position:fixed;inset:0;overflow:auto;background:#fff}
    .wrap{position:relative;width:100vw;margin:0 auto}
    .page{display:block;width:100vw;height:auto;object-fit:contain}

    /* Hotspots invisibles; en modo edición (debug) se ven */
    .hotspot{position:absolute;display:block;transform:translate(-50%,-50%);background:transparent;outline:0;z-index:2}
    .debug .hotspot{background:rgba(255,0,128,.15);outline:2px dashed rgba(255,0,128,.6)}
    .debug .wrap{cursor:crosshair}

    /* Ayuda on-screen (solo en modo edición) */
    .hint{position:fixed;left:10px;bottom:10px;background:#fff;border:1px solid #eee;border-radius:10px;
          padding:.45rem .6rem;font:14px/1.3 system-ui;opacity:.9;display:none;z-index:3}
    .debug .hint{display:block}
  </style>
</head>
<body>
  <div class="stage">
    <div class="wrap" id="wrap">
      <img class="page" id="page" src="assets/page-1.jpg" alt="Dossier de Sara Rom">
      <!-- === Hotspots (EDITA href= y ajusta posiciones) === -->
      <a class="hotspot" id="hs-tel"  href="tel:+34637090041" aria-label="Llamar"
         style="left:59.93%; top:96.67%; width:21%; height:0.5%;"></a>

      <a class="hotspot" id="hs-mail" href="mailto:sara@sararoma.es" aria-label="Email"
         style="left:59.71%; top:97.42%; width:21.5%; height:0.5%;"></a>

      <a class="hotspot" id="hs-li"   href="https://www.linkedin.com/in/sara-roma-pena" target="_blank" rel="noopener" aria-label="LinkedIn"
         style="left:59.56%; top:98.11%; width:20.5%; height:0.45%;"></a>
    </div>
  </div>

  <div class="hint" id="hint">
    <b>Modo edición</b> activo. Click para mover. 1/2/3 selecciona Tel/Email/LinkedIn.<br>
    Flechas: tamaño · Paso normal=0,5% · <b>Shift</b>=0,1% · <b>Alt</b>=0,05% · <b>E</b> exporta.
    <br>Pulsa <b>H</b> para salir de edición (ocultar rosa).
  </div>

  <script>
    // --- Sincroniza alto del contenedor con la imagen (coincidan clicks y hotspots)
    const wrap = document.getElementById('wrap');
    const img  = document.getElementById('page');
    function syncWrapHeight(){ wrap.style.height = img.clientHeight + 'px'; }
    img.addEventListener('load', syncWrapHeight);
    window.addEventListener('resize', syncWrapHeight);
    syncWrapHeight();

    // --- Hotspots
    const hs = {
      1: document.getElementById('hs-tel'),
      2: document.getElementById('hs-mail'),
      3: document.getElementById('hs-li')
    };
    let current = 1;  // seleccionado
    const MIN = 0.1;  // tamaño mínimo en %

    // Activa modo edición si la URL trae ?edit=1
    const params = new URLSearchParams(location.search);
    if (params.get('edit') === '1') document.body.classList.add('debug');

    // Toggle edición con H
    window.addEventListener('keydown', (e)=>{
      const k = (e.key||'').toLowerCase();
      if (k === 'h'){ document.body.classList.toggle('debug'); }
      if (k === '1' || k === '2' || k === '3'){ current = Number(k); }

      if (!document.body.classList.contains('debug')) return;

      const el = hs[current];
      const style = el.style;

      // Paso base 0.5%; con Shift 0.1%; con Alt 0.05%
      const base = 0.5;
      const step = e.shiftKey ? 0.1 : (e.altKey ? 0.05 : base);

      const clamp = (v,min,max)=>Math.max(min,Math.min(max,v));
      const w = parseFloat(style.width)  || 10;
      const h = parseFloat(style.height) || 3;

      const key = e.key.toLowerCase();
      if (['arrowleft','arrowright','arrowup','arrowdown'].includes(key)){
        e.preventDefault();
        if (key==='arrowleft')  style.width  = clamp(w - step, MIN, 100) + '%';
        if (key==='arrowright') style.width  = clamp(w + step, MIN, 100) + '%';
        if (key==='arrowup')    style.height = clamp(h - step, MIN, 100) + '%';
        if (key==='arrowdown')  style.height = clamp(h + step, MIN, 100) + '%';
      }

      // Exporta estilos actuales por consola para fijarlos
      if (k === 'e'){
        Object.values(hs).forEach(node=>{
          console.log(`#${node.id}: left:${node.style.left}; top:${node.style.top}; width:${node.style.width}; height:${node.style.height};`);
        });
      }
    });

    // Click para mover el hotspot seleccionado (solo en modo edición)
    wrap.addEventListener('click',(e)=>{
      if (!document.body.classList.contains('debug')) return;
      const r = wrap.getBoundingClientRect();
      const x = ((e.clientX - r.left) / r.width * 100).toFixed(2);
      const y = ((e.clientY - r.top) / r.height * 100).toFixed(2);
      const el = hs[current];
      el.style.left = x + '%';
      el.style.top  = y + '%';
      console.log(`#${el.id}: left:${el.style.left}; top:${el.style.top};`);
    });
  </script>
</body>
</html>
